class PitchShifterProcessor extends AudioWorkletProcessor{static get parameterDescriptors(){return[{name:"semitones",defaultValue:0,minValue:-24,maxValue:24,automationRate:"k-rate"}]}constructor(){super(),this.lastSemitones=0}process(e,t,s){const r=e[0],o=t[0];if(!r||!o)return!0;const i=Math.min(r.length||0,o.length||0),n=o[0]?.length||128,l=s.semitones,a=l.length>0?l[0]:0;a!==this.lastSemitones&&(this.lastSemitones=a);for(let e=0;e<i;e++){const t=r[e],s=o[e];if(t&&s)if(0===a)for(let e=0;e<n;e++)s[e]=t[e]||0;else{const e=-a,r=Math.pow(2,e/12);for(let e=0;e<n;e++){const o=e*r,i=Math.floor(o),n=o-i;i<t.length-1?s[e]=t[i]*(1-n)+t[i+1]*n:i<t.length?s[e]=t[i]:s[e]=0}}else if(s)for(let e=0;e<n;e++)s[e]=0}return!0}}registerProcessor("pitch-shifter-processor",PitchShifterProcessor);